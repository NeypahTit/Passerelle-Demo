<!DOCTYPE html>
<html>
    <head>
        <title>Pokemon Form's Result</title>
        <script>
            console.log(window.location);
            const params = new URLSearchParams(window.location.search);
            
            const username = params.get('username');
            const vote = params.get('choicePkmn');
            let myClass = "";
            
            const yellow = params.get('yellow');
            const orange = params.get('orange');
            const white = params.get('white');
            const black = params.get('black');
            const colorsArrayChecker = [yellow, orange, white, black];
            let colorsArray = [];
            let multipleColors = false;

            const isOver18 = params.get('isAdult');

            switch(vote) {
                case 'Raichu':
                    myClass = 'green';
                    break;
                case 'Pikachu':
                    myClass = 'red';
                    break;
                default:
                    myClass = 'blue';
            }

            for (i in colorsArrayChecker) {
                if (colorsArrayChecker[i] !== null) colorsArray.push(colorsArrayChecker[i]);
            }

            if (colorsArray.length > 1) multipleColors = true;

            this.onload = () => {
                const paragraph = document.querySelector("#result");
                paragraph.innerHTML = `<b><span id="username">${username}'s</span></b> favorite Pokemon is <b><span id="vote">${vote}</span></b>`;

                const voteSpan = document.querySelector("#vote");
                voteSpan.style.color = myClass;

                if (colorsArray.length != 0) {
                    if (!multipleColors) {
                        paragraph.innerHTML += `<br>Additionally, <b><span id="username">${username}'s</span></b> favorite color is <b><span id="colors_${colorsArray[0]}">${colorsArray[0]}</span></b>`;
                    } else {
                        let tempCount = 0;
                        paragraph.innerHTML += `<br>Additionally, <b><span id="username">${username}'s</span></b> favorite colors are `;

                        for (i in colorsArray) {
                            tempCount++;
                            paragraph.innerHTML += `<b><span id="colors_${colorsArray[i]}">${colorsArray[i]}</span></b>`;
                        
                            if (tempCount < colorsArray.length && colorsArray.length > 2) paragraph.innerHTML += ", ";

                            if (tempCount == colorsArray.length-1) paragraph.innerHTML += " and ";
                        }
                    }
                }

                if (isOver18 == "Yes") {
                    paragraph.innerHTML += `<br><br><b><span id="username">${username}</span></b> is <b>18 or more</b> years old.`;
                } else if (isOver18 == "No") {
                    paragraph.innerHTML += `<br><br><b><span id="username">${username}</span></b> is <b>under 18</b> years old.`;
                }
            }
        </script>
        <style>
            body {
                font-size: 1.35rem;
                text-align: center;
                background-color: rgb(255, 104, 54);
                color: white;
            }
            span#username {
                color:green;
            }

            .red {
                color:red;
            }
            .green {
                color:green;
            }
            .blue {
                color:blue;
            }

            #colors_Yellow {
                color:yellow;
            }
            #colors_Orange {
                color:orange;
            }
            #colors_White {
                color:white;
            }
            #colors_Black {
                color:black;
            }
        </style>
    </head>
    <body>
        <h1>Result</h1>
        <p id="result"></p>
    </body>
</html>